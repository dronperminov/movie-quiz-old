{% include "header.html" %}
<title>{{question.title}} | movie-quiz</title>
<link rel="stylesheet" type="text/css" href="/styles/question.css?v={{version}}">
</head>
<body>
    {% include "menu.html" %}

    <div class="question" id="question" data-question-type="{{question.type}}" data-film-id="{{film.film_id}}">
        <div class="question-header">{{question.title}}:</div>
        {% include "questions/%s.html" % question.type %}
        {% if film.rating.kp > 0 or film.rating.imdb > 0 %}
        {% endif %}

        <div class="error" id="error"></div>
        <button class="basic-button default-button" id="show-btn" onclick="ShowAnswer()">Показать ответ</button>

        <div class="question-answer hidden" id="answer">
            <h3>Ответ:</h3>

            <div class="form-row">
                <div class="form-row-icon">
                    <svg class="form-svg-stroke-icon" width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 12.6111L8.92308 17.5L20 6.5" stroke-width="2" />
                    </svg>
                </div>
                <div class="form-row-input text">{{question.answer}}</div>
            </div>

            <div class="table-block table-equal-block answer-buttons" id="check-answer">
                <div class="table-cell">
                    <button class="basic-button green-button" onclick="CheckAnswer(true)">Я знаю</button>
                </div>

                <div class="table-cell">
                    <button class="basic-button red-button" onclick="CheckAnswer(false)">Я не знаю</button>
                </div>
            </div>
            <div class="error" id="check-answer-error"></div>

            <h3>Дополнительно:</h3>
            {% if film.backdrop.previewUrl and question.type != "banner" and question.type != "year" %}
            <div class="banner">
                <img src="{{film.backdrop.previewUrl}}" alt="баннер">
            </div>
            {% endif %}

            <div class="form-row">
                <div class="form-row-icon">
                    <svg width="22" height="22" viewBox="0 0 202 202" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.5" y="0.5" width="201" height="201" fill="black"/>
                        <path d="M161 41L72.5771 88.3297L118.657 41H93.1143L61.7429 84.5446V41H41V161H61.7429V117.526L93.1143 161H118.657L73.7737 115.158L161 161V138.714L81.4434 106.798L161 112.143V89.8571L81.9474 94.9966L161 63.2857V41Z" fill="url(#paint0_radial_4902_369)"/>
                        <rect x="0.5" y="0.5" width="201" height="201" stroke="#474747"/>
                        <radialGradient id="paint0_radial_4902_369" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(41 41) rotate(45) scale(169.706)">
                        <stop offset="0.5" stop-color="#FF5500"/>
                        <stop offset="1" stop-color="#BBFF00"/>
                        </radialGradient>
                    </svg>
                </div>
                <div class="form-row-input text"><a href="https://www.kinopoisk.ru/film/{{film.film_id}}/" target="_blank">открыть на кинопоиске</a></div>
            </div>

            {% if film.slogan and question.type != "slogan" and question.type != "year" %}
            <div class="form-row" title="Слоган">
                <div class="form-row-icon form-row-top-icon">
                    <svg class="form-svg-fill-icon" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="-40 -40 250 250">
                        <path d="M44.33,88.474v15.377h38.417v82.745H0v-82.745h0.002V88.474c0-31.225,8.984-54.411,26.704-68.918
                        C38.964,9.521,54.48,4.433,72.824,4.433v44.326C62.866,48.759,44.33,48.759,44.33,88.474z M181.107,48.759V4.433
                        c-18.343,0-33.859,5.088-46.117,15.123c-17.72,14.507-26.705,37.694-26.705,68.918v15.377h0v82.745h82.744v-82.745h-38.417V88.474
                        C152.613,48.759,171.149,48.759,181.107,48.759z"/>
                    </svg>
                </div>
                <div class="form-row-input">{{film.slogan}}</div>
            </div>
            {% endif %}

            {% if film.description and question.type != "description" and question.type != "year" %}
            <div class="form-row" title="Описание">
                <div class="form-row-icon form-row-top-icon">
                    <svg class="form-svg-fill-icon" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24">
                        <path d="M2.75,17 L15.25,17 C15.6642136,17 16,17.3357864 16,17.75 C16,18.1296958 15.7178461,18.443491 15.3517706,18.4931534 L15.25,18.5 L2.75,18.5 C2.33578644,18.5 2,18.1642136 2,17.75 C2,17.3703042 2.28215388,17.056509 2.64822944,17.0068466 L2.75,17 L15.25,17 L2.75,17 Z M2.75,13 L21.25,13 C21.6642136,13 22,13.3357864 22,13.75 C22,14.1296958 21.7178461,14.443491 21.3517706,14.4931534 L21.25,14.5 L2.75,14.5 C2.33578644,14.5 2,14.1642136 2,13.75 C2,13.3703042 2.28215388,13.056509 2.64822944,13.0068466 L2.75,13 L21.25,13 L2.75,13 Z M2.75,9 L21.25,9 C21.6642136,9 22,9.33578644 22,9.75 C22,10.1296958 21.7178461,10.443491 21.3517706,10.4931534 L21.25,10.5 L2.75,10.5 C2.33578644,10.5 2,10.1642136 2,9.75 C2,9.37030423 2.28215388,9.05650904 2.64822944,9.00684662 L2.75,9 L21.25,9 L2.75,9 Z M2.75,5 L21.25,5 C21.6642136,5 22,5.33578644 22,5.75 C22,6.12969577 21.7178461,6.44349096 21.3517706,6.49315338 L21.25,6.5 L2.75,6.5 C2.33578644,6.5 2,6.16421356 2,5.75 C2,5.37030423 2.28215388,5.05650904 2.64822944,5.00684662 L2.75,5 L21.25,5 L2.75,5 Z" />
                    </svg>
                </div>
                <div class="form-row-input">{{film.description}}</div>
            </div>
            {% endif %}

            {% if film.year > 0 and question.type != "year" %}
            <div class="form-row" title="Год выхода">
                <div class="form-row-icon">
                    <svg class="form-svg-fill-icon" xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 456.726 456.726">
                        <path d="M408.204,54.922h-23.111V33.845C385.093,15.174,369.913,0,351.251,0c-18.658,0-33.838,15.174-33.838,33.845v21.078
                            h-48.297V33.845C269.116,15.174,253.938,0,235.278,0c-18.66,0-33.844,15.174-33.844,33.845v21.078h-53.001V33.845
                            c0-18.671-15.18-33.845-33.84-33.845C95.938,0,80.758,15.174,80.758,33.845v21.078H48.656c-9.929,0-17.976,5.062-17.976,11.302
                            v51.164c-0.024,0.449-0.137,0.875-0.137,1.335v308.552c0,16.23,13.209,29.45,29.453,29.45h336.592
                            c16.239,0,29.448-13.209,29.448-29.45v-260.1c0.046-0.293,0.145-0.561,0.145-0.854V66.219
                            C426.186,59.984,418.127,54.922,408.204,54.922z M334.241,33.845c0-9.382,7.615-17.013,17.005-17.013
                            c9.381,0,17.009,7.631,17.009,17.013v21.078h-34.014V33.845z M218.263,33.845c0-9.382,7.626-17.013,17.011-17.013
                            c9.38,0,17.006,7.631,17.006,17.013v21.078h-34.017V33.845z M97.579,33.845c0-9.382,7.629-17.013,17.01-17.013
                            S131.6,24.463,131.6,33.845v21.078H97.579V33.845z M400.79,427.275c0,2.322-1.881,4.203-4.201,4.203H59.992
                            c-2.32,0-4.209-1.881-4.209-4.203V177.629H400.79V427.275z M165.4,282.673c-2.848-2.923-4.271-6.326-4.271-10.168
                            c0-4.465,1.401-7.747,4.203-9.849c2.801-2.102,7.749-4.815,14.837-8.143c10.597-5.001,19.062-10.244,25.413-15.759
                            c6.346-5.517,11.972-11.689,16.875-18.523c4.903-6.829,8.099-11.031,9.591-12.607c1.487-1.573,4.289-2.364,8.4-2.364
                            c4.641,0,8.362,1.795,11.164,5.385c2.801,3.593,4.202,8.534,4.202,14.835v150.376c0,17.598-5.997,26.396-17.991,26.396
                            c-5.342,0-9.632-1.794-12.87-5.384c-3.24-3.595-4.859-8.892-4.859-15.896V261.475c-22.239,17.072-37.212,25.598-44.917,25.598
                            C171.507,287.082,168.242,285.616,165.4,282.673z"/>
                    </svg>
                </div>
                <div class="form-row-input">{{film.year}}</div>
            </div>
            {% endif %}

            {% if film.genres %}
            <div class="form-row" title="Жанры">
                <div class="form-row-icon">
                    <svg class="form-svg-fill-icon" width="24px" height="24px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M343.656,451.109C410,411.438,454.422,338.906,454.422,256c0-125.484-101.719-227.219-227.203-227.219
                            C101.719,28.781,0,130.516,0,256s101.719,227.219,227.219,227.219H512v-32.109H343.656z M318.484,145.875
                            c23.547-13.594,53.641-5.531,67.234,18.016s5.531,53.656-18.016,67.25c-23.547,13.578-53.641,5.516-67.234-18.016
                            C286.859,189.563,294.938,159.469,318.484,145.875z M300.453,297.688c13.609-23.547,43.703-31.609,67.25-18.016
                            c23.547,13.609,31.609,43.703,18.016,67.25s-43.688,31.609-67.25,18.016C294.938,351.344,286.859,321.234,300.453,297.688z
                             M227.219,72.375c27.188,0,49.219,22.031,49.219,49.219s-22.031,49.25-49.219,49.25s-49.25-22.063-49.25-49.25
                            S200.031,72.375,227.219,72.375z M249.938,256c0,12.563-10.172,22.719-22.719,22.719c-12.563,0-22.719-10.156-22.719-22.719
                            s10.156-22.719,22.719-22.719C239.766,233.281,249.938,243.438,249.938,256z M68.703,163.891
                            c13.594-23.547,43.703-31.609,67.25-18.016s31.609,43.688,18.016,67.25c-13.594,23.531-43.703,31.609-67.25,18.016
                            C63.188,217.547,55.109,187.438,68.703,163.891z M135.969,364.938c-23.563,13.594-53.656,5.531-67.266-18.016
                            c-13.578-23.547-5.516-53.656,18.016-67.266c23.547-13.594,53.656-5.516,67.25,18.031S159.5,351.344,135.969,364.938z
                             M177.969,389.203c0-27.188,22.063-49.234,49.25-49.234s49.219,22.047,49.219,49.234s-22.031,49.234-49.219,49.234
                            S177.969,416.391,177.969,389.203z"/>
                    </svg>
                </div>
                <div class="form-row-input">
                    {{film.genres|join(", ")}}
                </div>
            </div>
            {% endif %}

            {% if film.directors %}
            <div class="form-row">
                <div class="form-row-icon">
                    <svg class="form-svg-fill-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 512 512">
                        <path class="st0" d="M420.547,253.344V0h-32.578v29.75c-88.422,12.125-175.516,12.125-263.938,0V0H91.453v253.344
                            c-5.594,4.688-9.219,11.625-9.219,19.5c0,14.109,11.422,25.547,25.531,25.547c8.266,0,15.531-3.984,20.188-10.063h256.094
                            c4.656,6.078,11.922,10.063,20.188,10.063c14.109,0,25.531-11.438,25.531-25.547C429.766,264.969,426.141,258.031,420.547,253.344z
                             M387.969,177.813v75.5c-1.453,1.203-2.766,2.547-3.922,4.047H127.953c-1.156-1.5-2.469-2.844-3.922-4.047v-75.5
                            C212.25,188.5,299.75,188.5,387.969,177.813z"/>
                        <path class="st0" d="M357.938,460.906c-1.25,0-2.422,0.203-3.625,0.375l-1.422-1.438l-62.047-62l-10.219-10.203l-21.344,21.328
                            l73.266,73.234l0.25,0.234c-0.219,1.313-0.406,2.641-0.406,4.031c0,14.094,11.438,25.531,25.531,25.531
                            c14.109,0,25.547-11.438,25.547-25.531C383.469,472.344,372.031,460.906,357.938,460.906z"/>
                        <polygon class="st0" points="227.594,377.281 231.359,381.063 252.719,359.734 248.906,355.938 227.547,334.609 190.938,298.031
                            148.266,298.031 206.203,355.969     "/>
                        <path class="st0" d="M179.453,482.203l84.391-84.344l20.563-20.578l21.375-21.313l57.953-57.938h-42.672l-36.609,36.578
                            l-21.359,21.328l-41.938,41.906l-62.047,62l-1.438,1.438c-1.188-0.172-2.359-0.375-3.609-0.375
                            c-14.094,0-25.547,11.438-25.547,25.563c0,14.094,11.453,25.531,25.563,25.531c14.094,0,25.531-11.438,25.531-25.531
                            c0-1.391-0.188-2.719-0.406-4.031L179.453,482.203z M256.453,376.375c3.922,0,7.109,3.188,7.109,7.094
                            c0,3.938-3.188,7.125-7.109,7.125s-7.109-3.188-7.109-7.125C249.344,379.563,252.531,376.375,256.453,376.375z"/>
                    </svg>
                </div>
                <div class="form-row-input">
                    {{film.directors|map(attribute="name")|join(", ")}}
                </div>
            </div>
            {% endif %}

            {% if film.countries %}
            <div class="form-row" title="Страна производства">
                <div class="form-row-icon">
                    <svg class="form-svg-stroke-icon" width="24px" height="24px" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" stroke-width="2" fill="none">
                        <circle cx="12" cy="12" r="10"/>
                        <path stroke-linecap="round" d="M12,22 C14.6666667,19.5757576 16,16.2424242 16,12 C16,7.75757576 14.6666667,4.42424242 12,2 C9.33333333,4.42424242 8,7.75757576 8,12 C8,16.2424242 9.33333333,19.5757576 12,22 Z"/>
                        <path stroke-linecap="round" d="M2.5 9L21.5 9M2.5 15L21.5 15"/>
                    </svg>
                </div>
                <div class="form-row-input">
                    {{film.countries|join(", ")}}
                </div>
            </div>
            {% endif %}

            {% if film.actors and question.type != "actors" %}
            <div class="text"><b>Актёры:</b></div>
            <div class="scrollable">
                <div class="form-row" title="Актёры">
                    <div class="actors">
                        {% for actor in film.actors %}
                        <div class="actor">
                            <div class="actor-preview">
                                <img src="{{actor.photo}}" loading="lazy" />
                            </div>
                            <div class="actor-name">{{actor.name}}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}

            <div class="table-block">
                {% if user.role == "admin" %}
                <div class="table-cell">
                    <a href="/films/{{film.film_id}}" target="_blank"><button class="basic-button default-button">Редактировать</button></a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="/js/utils.js?v={{version}}"></script>
    <script src="/js/question.js?v={{version}}"></script>
    {% include "footer.html" %}
</body>
</html>
